"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2583],{9613:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>f});var r=n(9496);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},p=Object.keys(e);for(r=0;r<p.length;r++)n=p[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(r=0;r<p.length;r++)n=p[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var a=r.createContext({}),d=function(e){var t=r.useContext(a),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=d(e.components);return r.createElement(a.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,p=e.originalType,a=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),c=d(n),m=o,f=c["".concat(a,".").concat(m)]||c[m]||u[m]||p;return n?r.createElement(f,i(i({ref:t},s),{},{components:n})):r.createElement(f,i({ref:t},s))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var p=n.length,i=new Array(p);i[0]=m;var l={};for(var a in t)hasOwnProperty.call(t,a)&&(l[a]=t[a]);l.originalType=e,l[c]="string"==typeof e?e:o,i[1]=l;for(var d=2;d<p;d++)i[d]=n[d];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3553:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>f,frontMatter:()=>l,metadata:()=>d,toc:()=>c});var r=n(1966),o=n(9836),p=(n(9496),n(9613)),i=["components"],l={id:"deploy",title:"pnpm deploy"},a=void 0,d={unversionedId:"cli/deploy",id:"cli/deploy",title:"pnpm deploy",description:"D\xe9ployer un paquet \xe0 partir d'un espace de travail.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/current/cli/deploy.md",sourceDirName:"cli",slug:"/cli/deploy",permalink:"/fr/next/cli/deploy",draft:!1,editUrl:"https://translate.pnpm.io/project/pnpm/fr",tags:[],version:"current",frontMatter:{id:"deploy",title:"pnpm deploy"},sidebar:"docs",previous:{title:"pnpm init",permalink:"/fr/next/cli/init"},next:{title:"pnpm doctor",permalink:"/fr/next/cli/doctor"}},s={},c=[{value:"Options",id:"options",level:2},{value:"--dev, -D",id:"--dev--d",level:3},{value:"--no-optional",id:"--no-optional",level:3},{value:"--prod, -P",id:"--prod--p",level:3},{value:"--filter &lt;selecteur_de_paquet&gt;",id:"--filter-selecteur_de_paquet",level:3},{value:"Fichiers inclus dans le projet d\xe9ploy\xe9",id:"fichiers-inclus-dans-le-projet-d\xe9ploy\xe9",level:2}],u={toc:c},m="wrapper";function f(e){var t=e.components,n=(0,o.Z)(e,i);return(0,p.kt)(m,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,p.kt)("p",null,"D\xe9ployer un paquet \xe0 partir d'un espace de travail."),(0,p.kt)("p",null,"Utilisation :"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"pnpm --filter=<nom du projet d\xe9ploy\xe9> deploy <dossier cible>\n")),(0,p.kt)("p",null,"Si vous g\xe9n\xe9rez votre projet avant le d\xe9ploiement, utilisez \xe9galement l'option ",(0,p.kt)("inlineCode",{parentName:"p"},"--prod")," pour ignorer l'installation des d\xe9pendances de d\xe9veloppement (",(0,p.kt)("inlineCode",{parentName:"p"},"devDependencies"),")."),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre"},"pnpm --filter=<nom du projet d\xe9ploy\xe9> --prod deploy <target directory>\n")),(0,p.kt)("p",null,"Utilisation dans une image docker. Apr\xe8s avoir tout g\xe9n\xe9r\xe9 dans votre monorepo, faites ceci dans une deuxi\xe8me image qui utilise votre image de base monorepo comme contexte de construction ou dans une \xe9tape de g\xe9n\xe9ration suppl\xe9mentaire\xa0:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-Dockerfile"},'# syntax=docker/dockerfile:1.4\n\nFROM workspace as pruned\nRUN pnpm --filter <nom de votre paquet> --prod deploy pruned\n\nFROM node:18-alpine\nWORKDIR /app\n\nENV NODE_ENV=production\n\nCOPY --from=pruned /app/pruned .\n\nENTRYPOINT ["node", "index.js"]\n')),(0,p.kt)("h2",{id:"options"},"Options"),(0,p.kt)("h3",{id:"--dev--d"},"--dev, -D"),(0,p.kt)("p",null,"Seuls ",(0,p.kt)("inlineCode",{parentName:"p"},"devDependencies")," sont install\xe9s ind\xe9pendamment du ",(0,p.kt)("inlineCode",{parentName:"p"},"NODE_ENV"),"."),(0,p.kt)("h3",{id:"--no-optional"},"--no-optional"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"optionalDependencies")," ne sont pas install\xe9es."),(0,p.kt)("h3",{id:"--prod--p"},"--prod, -P"),(0,p.kt)("p",null,"Les paquets dans ",(0,p.kt)("inlineCode",{parentName:"p"},"devDependencies")," ne seront pas install\xe9s."),(0,p.kt)("h3",{id:"--filter-selecteur_de_paquet"},"--filter ","<","selecteur_de_paquet",">"),(0,p.kt)("p",null,(0,p.kt)("a",{parentName:"p",href:"/fr/next/filtering"},"En savoir plus sur le filtrage.")),(0,p.kt)("h2",{id:"fichiers-inclus-dans-le-projet-d\xe9ploy\xe9"},"Fichiers inclus dans le projet d\xe9ploy\xe9"),(0,p.kt)("p",null,"Par d\xe9faut, tous les fichiers du projet sont copi\xe9s pendant le d\xe9ploiement. Le fichier ",(0,p.kt)("inlineCode",{parentName:"p"},"package.json"),' du projet peut contenir un champ "files" pour r\xe9pertorier les fichiers et les dossiers qui devraient \xeatre copi\xe9s'))}f.isMDXComponent=!0}}]);