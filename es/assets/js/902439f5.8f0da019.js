"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3087],{9613:(e,a,n)=>{n.d(a,{Zo:()=>c,kt:()=>f});var t=n(9496);function o(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function r(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function i(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?r(Object(n),!0).forEach((function(a){o(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function l(e,a){if(null==e)return{};var n,t,o=function(e,a){if(null==e)return{};var n,t,o={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||(o[n]=e[n]);return o}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=t.createContext({}),p=function(e){var a=t.useContext(s),n=a;return e&&(n="function"==typeof e?e(a):i(i({},a),e)),n},c=function(e){var a=p(e.components);return t.createElement(s.Provider,{value:a},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},m=t.forwardRef((function(e,a){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=o,f=u["".concat(s,".").concat(m)]||u[m]||d[m]||r;return n?t.createElement(f,i(i({ref:a},c),{},{components:n})):t.createElement(f,i({ref:a},c))}));function f(e,a){var n=arguments,o=a&&a.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l[u]="string"==typeof e?e:o,i[1]=l;for(var p=2;p<r;p++)i[p]=n[p];return t.createElement.apply(null,i)}return t.createElement.apply(null,n)}m.displayName="MDXCreateElement"},6951:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>c,contentTitle:()=>s,default:()=>f,frontMatter:()=>l,metadata:()=>p,toc:()=>u});var t=n(1966),o=n(9836),r=(n(9496),n(9613)),i=["components"],l={title:"Opciones de configuraci\xf3n de Node-Modules con pnpm",author:"Zoltan Kochan",authorURL:"http://twitter.com/zoltankochan",authorImageURL:"https://gravatar.com/avatar/1f59f040fb37d5799e3879fa678c2373?s=48"},s=void 0,p={permalink:"/es/blog/2020/10/17/node-modules-configuration-options-with-pnpm",editUrl:"https://translate.pnpm.io/project/pnpm/es-ES",source:"@site/i18n/es/docusaurus-plugin-content-blog/2020-10-17-node-modules-configuration-options-with-pnpm.md",title:"Opciones de configuraci\xf3n de Node-Modules con pnpm",description:"Hay muchas maneras de crear un directorio de los m\xf3dulos de node. Tu objetivo debe ser crear el m\xe1s estricto, pero si eso no es posible, tambi\xe9n hay opciones para hacer un node_modules suelto tambi\xe9n.",date:"2020-10-17T00:00:00.000Z",formattedDate:"17 de octubre de 2020",tags:[],readingTime:1.925,hasTruncateMarker:!0,authors:[{name:"Zoltan Kochan",url:"http://twitter.com/zoltankochan",imageURL:"https://gravatar.com/avatar/1f59f040fb37d5799e3879fa678c2373?s=48"}],frontMatter:{title:"Opciones de configuraci\xf3n de Node-Modules con pnpm",author:"Zoltan Kochan",authorURL:"http://twitter.com/zoltankochan",authorImageURL:"https://gravatar.com/avatar/1f59f040fb37d5799e3879fa678c2373?s=48"},prevItem:{title:"El a\xf1o 2021 para pnpm",permalink:"/es/blog/2021/12/29/yearly-update"},nextItem:{title:"El node_modules plano no es la \xfanica forma",permalink:"/es/blog/2020/05/27/flat-node-modules-is-not-the-only-way"}},c={authorsImageUrls:[void 0]},u=[{value:"La configuraci\xf3n predeterminada",id:"la-configuraci\xf3n-predeterminada",level:2},{value:"Plug&#39;nPlay. La configuraci\xf3n m\xe1s estricta",id:"plugnplay-la-configuraci\xf3n-m\xe1s-estricta",level:2},{value:"Un directorio de m\xf3dulos estricto y tradicional",id:"un-directorio-de-m\xf3dulos-estricto-y-tradicional",level:2},{value:"El peor caso - hoisting a la ra\xedz",id:"el-peor-caso---hoisting-a-la-ra\xedz",level:2}],d={toc:u},m="wrapper";function f(e){var a=e.components,n=(0,o.Z)(e,i);return(0,r.kt)(m,(0,t.Z)({},d,n,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Hay muchas maneras de crear un directorio de los m\xf3dulos de node. Tu objetivo debe ser crear el m\xe1s estricto, pero si eso no es posible, tambi\xe9n hay opciones para hacer un node_modules suelto tambi\xe9n."),(0,r.kt)("h2",{id:"la-configuraci\xf3n-predeterminada"},"La configuraci\xf3n predeterminada"),(0,r.kt)("p",null,"De forma predeterminada, pnpm v6 crear\xe1 un directorio semi estricto de node_modules. Semi estricto significa que tu aplicaci\xf3n solo podr\xe1 requerir paquetes que se agreguen como dependencias a ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," (con un par de excepciones). Sin embargo, tus dependencias podr\xe1n acceder a cualquier paquete."),(0,r.kt)("p",null,"La configuraci\xf3n predeterminada se ve as\xed:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"; Todos los paquetes son hoisteados a node_modules/.pnpm/node_modules\nhoist-pattern[]=*\n\n; Todos los tipos son hoisteados a la ra\xedz para que TypeScript no moleste\npublic-hoist-pattern[]=*types*\n\n; Todos los paquetes relacionados con ESLint son hoisteados a la ra\xedz tambi\xe9n\npublic-hoist-pattern[]=*eslint*\n")),(0,r.kt)("h2",{id:"plugnplay-la-configuraci\xf3n-m\xe1s-estricta"},"Plug'nPlay. La configuraci\xf3n m\xe1s estricta"),(0,r.kt)("p",null,"pnpm soporta ",(0,r.kt)("a",{parentName:"p",href:"https://yarnpkg.com/features/pnp"}," el Plug'n'Play de Yarn")," desde la v5.9. Con PnP, tanto su aplicaci\xf3n como las dependencias de su aplicaci\xf3n tendr\xe1n acceso solo a sus dependencias declaradas. Esto es a\xfan m\xe1s estricto que establecer ",(0,r.kt)("inlineCode",{parentName:"p"},"hoist=false")," porque dentro de un monorepo, su aplicaci\xf3n no podr\xe1 acceder ni siquiera a las dependencias del proyecto ra\xedz."),(0,r.kt)("p",null,"Para usar Plug'n'Play, establezca estos ajustes:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"node-linker=pnp\nsymlink=false\n")),(0,r.kt)("h2",{id:"un-directorio-de-m\xf3dulos-estricto-y-tradicional"},"Un directorio de m\xf3dulos estricto y tradicional"),(0,r.kt)("p",null,"Si no est\xe1s listo para usar PnP a\xfan, puedes ser estricto y \xfanicamente permitir que los paquetes accedan a sus propias dependencias fijando la configuraci\xf3n de hoist a falso:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"hoist=false\n")),(0,r.kt)("p",null,"Sin embargo, si alguna de tus dependencias intentan acceder a paquetes que no forman parte de sus dependencias, tienes dos opciones:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Crea un archivo ",(0,r.kt)("inlineCode",{parentName:"p"},"pnpmfile.js")," y utiliza un ",(0,r.kt)("a",{parentName:"p",href:"/pnpmfile"},"hook")," para agregar la dependencia que falta al manifiesto del paquete.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Agrega un patr\xf3n a la opci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"hoist-pattern"),". Por ejemplo, si el m\xf3dulo que falta es ",(0,r.kt)("inlineCode",{parentName:"p"},"babel-core"),", agrega la siguiente configuraci\xf3n a ",(0,r.kt)("inlineCode",{parentName:"p"},".npmrc"),":"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"hoist-pattern[]=babel-core\n")))),(0,r.kt)("h2",{id:"el-peor-caso---hoisting-a-la-ra\xedz"},"El peor caso - hoisting a la ra\xedz"),(0,r.kt)("p",null,"Algunas herramientas tal vez no funcionen a\xfan con la configuraci\xf3n predeterminada de pnpm, que hoistea todo a la ra\xedz de la virtual store y a algunos paquetes a la ra\xedz. En este caso, puedes hoistear todo o una parte de las dependencias a la ra\xedz del directorio de m\xf3dulos."),(0,r.kt)("p",null,"Hoistear todo a la ra\xedz de node_modules:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"shamefully-hoist=true\n")),(0,r.kt)("p",null,"Hoistear \xfanicamente los paquetes que coincidan con un patr\xf3n:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"public-hoist-pattern[]=babel-*\n")))}f.isMDXComponent=!0}}]);