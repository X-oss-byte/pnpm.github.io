"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1892],{9613:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>k});var a=t(9496);function p(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){p(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,p=function(e,n){if(null==e)return{};var t,a,p={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(p[t]=e[t]);return p}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(p[t]=e[t])}return p}var m=a.createContext({}),s=function(e){var n=a.useContext(m),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},d=function(e){var n=s(e.components);return a.createElement(m.Provider,{value:n},e.children)},i="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,p=e.mdxType,o=e.originalType,m=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),i=s(t),c=p,k=i["".concat(m,".").concat(c)]||i[c]||u[c]||o;return t?a.createElement(k,r(r({ref:n},d),{},{components:t})):a.createElement(k,r({ref:n},d))}));function k(e,n){var t=arguments,p=n&&n.mdxType;if("string"==typeof e||p){var o=t.length,r=new Array(o);r[0]=c;var l={};for(var m in n)hasOwnProperty.call(n,m)&&(l[m]=n[m]);l.originalType=e,l[i]="string"==typeof e?e:p,r[1]=l;for(var s=2;s<o;s++)r[s]=t[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},6066:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>m,default:()=>k,frontMatter:()=>l,metadata:()=>s,toc:()=>i});var a=t(1966),p=t(9836),o=(t(9496),t(9613)),r=["components"],l={title:"\u5e73\u9762\u5316node_module\u4e0d\u6703\u662f\u552f\u4e00\u7684\u65b9\u6cd5",author:"Zoltan Kochan",authorURL:"http://twitter.com/zoltankochan",authorImageURL:"https://gravatar.com/avatar/1f59f040fb37d5799e3879fa678c2373?s=48"},m=void 0,s={permalink:"/zh-TW/blog/2020/05/27/flat-node-modules-is-not-the-only-way",editUrl:"https://translate.pnpm.io/project/pnpm/zh-TW",source:"@site/i18n/zh-TW/docusaurus-plugin-content-blog/2020-05-27-flat-node-modules-is-not-the-only-way.md",title:"\u5e73\u9762\u5316node_module\u4e0d\u6703\u662f\u552f\u4e00\u7684\u65b9\u6cd5",description:"\u65b0\u4f7f\u7528\u8005\u7d93\u5e38\u554f\u6211\u95dc\u65bc pnpm \u751f\u6210\u51fa\u4f86\u7684\u5947\u602a node_modules \u8cc7\u6599\u593e\u7d50\u69cb\u3002 \u70ba\u4ec0\u9ebc\u5b83\u4e0d\u662f\u6241\u5e73\u5316\u7684\uff1f \u800c\u4e14\u5168\u90e8\u7684\u5b50\u4f9d\u8cf4\u5957\u4ef6\u8dd1\u53bb\u54ea\u4e86\uff1f",date:"2020-05-27T00:00:00.000Z",formattedDate:"2020\u5e745\u670827\u65e5",tags:[],readingTime:4.405,hasTruncateMarker:!0,authors:[{name:"Zoltan Kochan",url:"http://twitter.com/zoltankochan",imageURL:"https://gravatar.com/avatar/1f59f040fb37d5799e3879fa678c2373?s=48"}],frontMatter:{title:"\u5e73\u9762\u5316node_module\u4e0d\u6703\u662f\u552f\u4e00\u7684\u65b9\u6cd5",author:"Zoltan Kochan",authorURL:"http://twitter.com/zoltankochan",authorImageURL:"https://gravatar.com/avatar/1f59f040fb37d5799e3879fa678c2373?s=48"},prevItem:{title:"Pnpm \u7684 Node-Modules \u8a2d\u5b9a\u9078\u9805",permalink:"/zh-TW/blog/2020/10/17/node-modules-configuration-options-with-pnpm"}},d={authorsImageUrls:[void 0]},i=[],u={toc:i},c="wrapper";function k(e){var n=e.components,t=(0,p.Z)(e,r);return(0,o.kt)(c,(0,a.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"\u65b0\u4f7f\u7528\u8005\u7d93\u5e38\u554f\u6211\u95dc\u65bc pnpm \u751f\u6210\u51fa\u4f86\u7684\u5947\u602a ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," \u8cc7\u6599\u593e\u7d50\u69cb\u3002 \u70ba\u4ec0\u9ebc\u5b83\u4e0d\u662f\u6241\u5e73\u5316\u7684\uff1f \u800c\u4e14\u5168\u90e8\u7684\u5b50\u4f9d\u8cf4\u5957\u4ef6\u8dd1\u53bb\u54ea\u4e86\uff1f"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u5728\u6b64\u6703\u5047\u8a2d\u6b64\u6587\u8b80\u8005\u5df2\u7d93\u719f\u6089\u4e86 npm \u548c Yarn \u5275\u5efa\u51fa\u4f86\u7684\u6241\u5e73\u5316 ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," \u8cc7\u6599\u593e\u3002 \u5982\u679c\u60a8\u4e0d\u4e86\u89e3\u70ba\u4ec0\u9ebc npm \u8981\u5728\u7b2c\u4e09\u7248\u958b\u59cb\u4f7f\u7528\u6241\u5e73\u5316 ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules"),"\uff0c\u60a8\u53ef\u4ee5\u5728",(0,o.kt)("a",{parentName:"p",href:"https://www.kochan.io/nodejs/why-should-we-use-pnpm.html"},"\u70ba\u4ec0\u9ebc\u6211\u5011\u61c9\u8a72\u4f7f\u7528pnpm"),"\u6587\u7ae0\u4e2d\u627e\u5230\u4e00\u4e9b\u80cc\u666f")),(0,o.kt)("p",null,"\u6240\u4ee5\u70ba\u4ec0\u9ebc pnpm \u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," \u5982\u6b64\u7279\u6b8a\uff1f \u8b93\u6211\u5011\u5148\u5275\u5efa\u5169\u500b\u8cc7\u6599\u593e\uff0c\u7136\u5f8c\u5728\u5176\u4e2d\u4e00\u500b\u8cc7\u6599\u593e\u57f7\u884c ",(0,o.kt)("inlineCode",{parentName:"p"},"npm add express"),"\uff0c\u53e6\u4e00\u500b\u8cc7\u6599\u593e\u57f7\u884c ",(0,o.kt)("inlineCode",{parentName:"p"},"pnpm add express")," \u4ee5\u4e0b\u662f\u60a8\u80fd\u5728\u7b2c\u4e00\u500b\u8cc7\u6599\u593e\u4e2d\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," \u5167\u80fd\u770b\u5230\u7684\u8cc7\u6599\u593e\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},".bin\naccepts\narray-flatten\nbody-parser\nbytes\ncontent-disposition\ncookie-signature\ncookie\ndebug\ndepd\ndestroy\nee-first\nencodeurl\nescape-html\netag\nexpress\n")),(0,o.kt)("p",null,"\u60a8\u53ef\u4ee5\u5728",(0,o.kt)("a",{parentName:"p",href:"https://github.com/zkochan/comparing-node-modules/tree/master/npm-example/node_modules"},"\u9019\u88e1"),"\u770b\u5230\u6574\u500b\u8cc7\u6599\u593e\u7d50\u69cb"),(0,o.kt)("p",null,"\u4ee5\u53ca\uff0c\u9019\u662f\u60a8\u80fd\u5728 pnpm \u5275\u5efa\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," \u8cc7\u6599\u593e\u4e2d\u770b\u5230\u7684\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},".pnpm\n.modules.yaml\nexpress\n")),(0,o.kt)("p",null,"\u60a8\u53ef\u4ee5\u5728",(0,o.kt)("a",{parentName:"p",href:"https://github.com/zkochan/comparing-node-modules/tree/master/pnpm5-example/node_modules"},"\u9019\u88e1"),"\u67e5\u770b"),(0,o.kt)("p",null,"\u6240\u4ee5\u5168\u90e8\u7684\u4f9d\u8cf4\u5957\u4ef6\u8dd1\u53bb\u54ea\u4e86\uff1f ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," \u88e1\u9762\u53ea\u6709\u4e00\u500b\u540d\u70ba ",(0,o.kt)("inlineCode",{parentName:"p"},".pnpm")," \u7684\u8cc7\u6599\u593e\u9084\u6709\u4e00\u500b\u540d\u70ba ",(0,o.kt)("inlineCode",{parentName:"p"},"express")," \u7684\u8edf\u9023\u7d50\u3002 \u55ef\uff0c\u56e0\u70ba\u6211\u5011\u53ea\u6709\u5b89\u88dd ",(0,o.kt)("inlineCode",{parentName:"p"},"express"),"\uff0c\u6240\u4ee5\u53ea\u6709\u90a3\u500b\u5957\u4ef6\u662f\u60a8\u7684\u7a0b\u5f0f\u53ef\u4ee5\u5b58\u53d6\u7684\u3002"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u60a8\u53ef\u4ee5",(0,o.kt)("a",{parentName:"p",href:"https://medium.com/pnpm/pnpms-strictness-helps-to-avoid-silly-bugs-9a15fb306308"},"\u5728\u6b64"),"\u4e86\u89e3\u66f4\u591a\u95dc\u65bc\u70ba\u4ec0\u9ebcpnpm\u7684\u56b4\u683c\u6027\u662f\u597d\u7684\u6771\u897f")),(0,o.kt)("p",null,"\u8b93\u6211\u5011\u770b\u770b ",(0,o.kt)("inlineCode",{parentName:"p"},"express"),"\u8cc7\u6599\u593e\u5167\u6709\u4ec0\u9ebc\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"\u25be node_modules\n  \u25b8 .pnpm\n  \u25be express\n    \u25b8 lib\n      History.md\n      index.js\n      LICENSE\n      package.json\n      Readme.md\n  .modules.yaml\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"express")," \u4e2d\u6c92\u6709 ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," \u8cc7\u6599\u593e\uff1f \u90a3 ",(0,o.kt)("inlineCode",{parentName:"p"},"express")," \u7684\u5168\u90e8\u4f9d\u8cf4\u5957\u4ef6\u8dd1\u53bb\u54ea\u4e86\uff1f"),(0,o.kt)("p",null,"\u79d8\u8a23\u5c31\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},"express")," \u53ea\u662f\u4e00\u500b\u8edf\u9023\u7d50\u3002 \u7576 Node.js \u89e3\u6790\u4f9d\u8cf4\u5957\u4ef6\u6642\uff0c\u56e0\u70ba Node.js \u6703\u4f7f\u7528\u5b83\u5011\u7684\u771f\u5be6\u4f4d\u7f6e\uff0c\u6240\u4ee5 Node.js \u4e0d\u6703\u4fdd\u7559\u8edf\u9023\u7d50\u3002 \u6216\u8a31\u4f60\u6703\u60f3\u554f\uff1a ",(0,o.kt)("inlineCode",{parentName:"p"},"express")," \u7684\u771f\u5be6\u4f4d\u7f6e\u5728\u54ea\u88e1\uff1f"),(0,o.kt)("p",null,"\u7b54\u6848\u662f\u5728\u9019\u88e1\uff1a",(0,o.kt)("a",{parentName:"p",href:"https://github.com/zkochan/comparing-node-modules/tree/master/pnpm5-example/node_modules/.pnpm/express@4.17.1/node_modules/express"},"node_modules/.pnpm/express@4.17.1/node_modules/express"),"\u3002"),(0,o.kt)("p",null,"\u597d\u7684\uff0c\u6240\u4ee5\u6211\u5011\u73fe\u5728\u77ad\u89e3\u4e86 ",(0,o.kt)("inlineCode",{parentName:"p"},".pnpm/")," \u8cc7\u6599\u593e\u7684\u4f5c\u7528\u3002 ",(0,o.kt)("inlineCode",{parentName:"p"},".pnpm/")," \u662f\u4ee5\u6241\u5e73\u5316\u7684\u65b9\u5f0f\u5132\u5b58\u6240\u6709\u6a21\u7d44\uff0c\u6240\u4ee5\u6240\u6709\u6a21\u7d44\u53ef\u4ee5\u5728\u4ee5\u4e0b\u9019\u500b\u8def\u5f91\u627e\u5230\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},".pnpm/<\u6a21\u7d44\u540d\u7a31>@<\u6a21\u7d44\u7248\u672c>/node_modules/<\u6a21\u7d44\u540d\u7a31>\n")),(0,o.kt)("p",null,"\u6211\u5011\u7a31\u5b83\u70ba\u865b\u64ec\u7684\u5132\u5b58\u8cc7\u6599\u593e"),(0,o.kt)("p",null,"\u4e0d\u50cf npm \u7b2c 3\u30014\u30015\u30016 \u7248\u6216Yarn\u7684\u7b2c 1 \u7248\u7684\u6241\u5e73\u5316 ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules"),"\uff0c\u9019\u500b\u6241\u5e73\u5316\u7d50\u69cb\u9664\u4e86\u53ef\u4ee5\u907f\u514d\u5de2\u72c0 ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," \u5e36\u4f86\u7684\u9577\u8def\u5f91\u554f\u984c\uff0c\u4e5f\u80fd\u4f7f\u6a21\u7d44\u4fdd\u6301\u7368\u7acb\u3002"),(0,o.kt)("p",null,"\u73fe\u5728\uff0c\u8b93\u6211\u5011\u4f86\u770b\u4e00\u4e0b ",(0,o.kt)("inlineCode",{parentName:"p"},"express")," \u771f\u6b63\u7684\u4f4d\u7f6e\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"  \u25be express\n    \u25b8 lib\n      History.md\n      index.js\n      LICENSE\n      package.json\n      Readme.md\n")),(0,o.kt)("p",null,"\u9019\u662f\u5728\u9a19\u4eba\u55ce\uff1f \u9084\u662f\u6c92\u6709 ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," \u8cc7\u6599\u593e\u5440\uff01 \u7b2c\u4e8c\u500b pnpm \u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," \u8cc7\u6599\u593e\u7d50\u69cb\u79d8\u8a23\u5c31\u662f\uff0c\u6a21\u7d44\u7684\u4f9d\u8cf4\u5957\u4ef6\u6703\u548c\u4f9d\u8cf4\u5957\u4ef6\u5be6\u969b\u4f4d\u7f6e\u5728\u540c\u4e00\u5c64\u8cc7\u6599\u593e\u3002 \u6240\u4ee5 ",(0,o.kt)("inlineCode",{parentName:"p"},"express")," \u7684\u4f9d\u8cf4\u5957\u4ef6\u4f4d\u7f6e\u4e0d\u662f\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},".pnpm/express@4.17.1/node_modules/express/node_modules/"),"\uff0c\u800c\u662f\u5728 ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/zkochan/comparing-node-modules/tree/master/pnpm5-example/node_modules/.pnpm/express@4.17.1/node_modules"},".pnpm/express@4.17.1/node_modules/"),"\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"\u25be node_modules\n  \u25be .pnpm\n    \u25b8 accepts@1.3.5\n    \u25b8 array-flatten@1.1.1\n    ...\n    \u25be express@4.16.3\n      \u25be node_modules\n        \u25b8 accepts\n        \u25b8 array-flatten\n        \u25b8 body-parser\n        \u25b8 content-disposition\n        ...\n        \u25b8 etag\n        \u25be express\n          \u25b8 lib\n            History.md\n            index.js\n            LICENSE\n            package.json\n            Readme.md\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"express")," \u7684\u5168\u90e8\u4f9d\u8cf4\u5957\u4ef6\u90fd\u6703\u8edf\u9023\u7d50\u81f3 ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules/.pnpm/")," \u5167\u5c0d\u61c9\u7684\u8cc7\u6599\u593e\u3002 \u5c07 ",(0,o.kt)("inlineCode",{parentName:"p"},"express")," \u7684\u4f9d\u8cf4\u6a21\u7d44\u653e\u5728\u540c\u4e00\u5c64\u8cc7\u6599\u593e\u53ef\u4ee5\u907f\u514d\u8edf\u9023\u7d50\u5faa\u74b0\u3002"),(0,o.kt)("p",null,"\u6240\u4ee5\u5982\u60a8\u6240\u898b\uff0c\u96d6\u7136\u4e00\u958b\u59cb\u4f3c\u4e4e\u6703\u89ba\u5f97 pnpm \u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"node_modules")," \u7d50\u69cb\u5f88\u7279\u6b8a\uff1a"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"\u4f46\u4ed6\u548c Node.js \u5b8c\u5168\u76f8\u5bb9"),(0,o.kt)("li",{parentName:"ol"},"\u4e26\u4e14\u6a21\u7d44\u548c\u5176\u4f9d\u8cf4\u5957\u4ef6\u53ef\u4ee5\u88ab\u5f88\u597d\u7684\u5206\u985e")),(0,o.kt)("p",null,"\u5c0d\u65bc\u6709\u5c0d\u7b49\u4f9d\u8cf4\u5957\u4ef6\u7684\u6a21\u7d44\uff0c\u7d50\u69cb\u6703\u7a0d\u5fae",(0,o.kt)("a",{parentName:"p",href:"/how-peers-are-resolved"},"\u66f4\u8907\u96dc\u4e00\u9ede"),"\uff0c\u4f46\u6982\u5ff5\u9084\u662f\u4e00\u6a23\u7684\uff1a\u4f7f\u7528\u8edf\u9023\u7d50\u548c\u6241\u5e73\u5316\u8cc7\u6599\u593e\u7d50\u69cb\u5275\u5efa\u5de2\u72c0\u7d50\u69cb"))}k.isMDXComponent=!0}}]);